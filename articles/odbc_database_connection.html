<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Connect to a PostgreSQL Database using ODBC • kwt</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Connect to a PostgreSQL Database using ODBC">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kwt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/odbc_database_connection.html">Connect to a PostgreSQL Database using ODBC</a></li>
    <li><a class="dropdown-item" href="../articles/query_database.html">Query PostGIS</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Connect to a PostgreSQL Database using ODBC</h1>
            
      

      <div class="d-none name"><code>odbc_database_connection.Rmd</code></div>
    </div>

    
    
<p>This package uses ODBC connections in functions that interact with
the PostGIS database. These connections are saved to your local machine,
avoiding the need to use the .Renviron and any reduce the risk that
credentials can be accidentally shared. Each database you use will need
an ODBC connection created by following these instructions.</p>
<div class="section level3">
<h3 id="download-and-install-the-postgresql-odbc-driver">1 - Download and install the PostgreSQL ODBC driver<a class="anchor" aria-label="anchor" href="#download-and-install-the-postgresql-odbc-driver"></a>
</h3>
<p>The driver can be downloaded here: <a href="https://www.postgresql.org/ftp/odbc/releases/REL-16_00_0005-mimalloc/" class="external-link uri">https://www.postgresql.org/ftp/odbc/releases/REL-16_00_0005-mimalloc/</a>.
You’ll need to download the psqlodbc-setup.exe file and run it.</p>
<p><img src="img/installer-start.png" width="70%"></p>
<p>Use the next buttons to go through the wizard. You will need to agree
to the liscence agreement. Then click ‘install’.</p>
<p>Wait for the installation (you may need to click ok to let windows
install the driver).</p>
<p><img src="img/installer-wait.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="set-up-an-odbc-data-source">2 - Set up an ODBC Data Source<a class="anchor" aria-label="anchor" href="#set-up-an-odbc-data-source"></a>
</h3>
<p>When installation is complete, search ‘ODBC’ in the search box in
your task bar. Click on the app called <strong>ODBC Data Sources
(64-bit)</strong>.</p>
<p><img src="img/find-odbc-app.png" width="70%"></p>
<p>Go to the second tab called ‘System DSN’. You probably won’t have
anything listed here yet! Click ‘Add…’ to open a smaller box.</p>
<p><img src="img/odbc-system-dsn.png" width="70%"></p>
<p>Select the PostgreSQL Unicode(x64) driver. If this isn’t listed, the
installation wasn’t successful. Click Finish to open yet another
box.</p>
<p><img src="img/choose-driver.png" width="70%"></p>
<p>Enter the details as follows:</p>
<ul>
<li>Data Source: Choose a name for the connection. It’s easiest to use
the name of the database this connects to. In this example it’s the
database called ‘shared’.</li>
<li>Description: Not really necessary. Leave blank.</li>
<li>Database: The name of the database. Usually this will be ‘shared’ as
that’s where most of the GIS data is.</li>
<li>SSL Mode: Set to ‘prefer’.</li>
<li>Server: The host address of the server. This will be provided along
with your database credentials.</li>
<li>Port: Set to 5432.</li>
<li>User Name: Your username which will be give to you.</li>
<li>Password: Also given to you.</li>
</ul>
<p><img src="img/connection-details.png" width="70%"></p>
<p>Once you’ve entered all of that, click ‘Test’ to check it works. Then
click ‘Save’. The connection should now be listed under System Data
Sources, so you can click ‘OK’ to close the ODBC Data Source
Administrator.</p>
</div>
<div class="section level3">
<h3 id="connect-to-the-data-source-in-rstudio">3 - Connect to the Data Source in RStudio<a class="anchor" aria-label="anchor" href="#connect-to-the-data-source-in-rstudio"></a>
</h3>
<p>Open RStudio and click on ‘New Connection’ in the Connections
Pane.</p>
<p><img src="img/new-connection.png" width="70%"></p>
<p>You should be able to find your newly created ODBC data source in the
box that opens up. Click on it and then make sure you choose ‘Connect
from: R Console’. Click OK.</p>
<p><img src="img/choose-connection.png" width="70%"></p>
<p><img src="img/connection-settings.png" width="70%"></p>
<p>Now you should see the database represented by a series of dropdowns
for schemas and objects inside (tables, views and materialised views).
You can choose to write SQL queries yourself by clicking the SQL button,
though this package allows you to easily use the database without any
need to write SQL yourself. Functions like <code>kwt::start_query</code>
and <code>kwt::run_query</code> make use of the connection object
created by the code chunk above. They can be combined with
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> functions to make SQL queries that are run on the
server, returning a data frame or spatial data frame. In those functions
you may need to specify the connection object just created, in this
example called <code>con</code>, however if you leave the name of the
connection object as <code>db</code> then the functions in this package
will use it without needing to explicitly include it as an argument.</p>
<p><img src="img/db-list-rstudio.png" width="70%"></p>
<p>RStudio now remembers the code chunk used to set up that connection
and any others that you create. This means the connection is only a
couple of clicks away from being made! There is also no risk of your
database credentials being exposed in your code.</p>
<p><img src="img/stored-connections.png" width="70%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robbie Still, Euan Mckenzie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
